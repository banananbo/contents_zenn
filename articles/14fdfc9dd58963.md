---
title: "curlã‚¨ãƒ©ãƒ¼ã¨TLSã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®èª¿æŸ»"
emoji: "ğŸ˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['curl','tls']
published: false
---
## å•é¡Œ
å¤ã‚ã®é–‹ç™ºç’°å¢ƒã§ã®èª¿æŸ»æ™‚ã«ã€curlã§è¨¼æ˜æ›¸ã®ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã®ã§èª¿æŸ»

## ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼
```
curl: (60) SSL certificate problem: certificate has expired
More details here: https://curl.haxx.se/docs/sslcerts.html

curl failed to verify the legitimacy of the server and therefore could not
establish a secure connection to it. To learn more about this situation and
how to fix it, please visit the web page mentioned above.
```
curl -v ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚‚ã†ã™ã“ã—ç´°ã‹ãè¦‹ã¦ã¿ã‚‹
```
* successfully set certificate verify locations:
*   CAfile: /path.to/xxxx.crt
  CApath: none
* TLSv1.2 (OUT), TLS handshake, Client hello (1):
* TLSv1.2 (IN), TLS handshake, Server hello (2):
* NPN, negotiated HTTP1.1
* TLSv1.2 (IN), TLS handshake, Certificate (11):
* TLSv1.2 (OUT), TLS alert, Server hello (2):
* SSL certificate problem: certificate has expired
* Closing connection 0
curl: (60) SSL certificate problem: certificate has expired
More details here: https://curl.haxx.se/docs/sslcerts.html
```

ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒã‚·ãƒ³ã‹ã‚‰ã ã¨ã€åŒã˜ã‚µã‚¤ãƒˆã«ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ããŸã€‚
ã“ã‚Œã¨ã®é•ã„ã‚’è¦‹ã¦ã¿ã‚‹ã¨
```
* ALPN: offers h2
* ALPN: offers http/1.1
*  CAfile: /path.to/xxxx.pem
*  CApath: none
* (304) (OUT), TLS handshake, Client hello (1):
* (304) (IN), TLS handshake, Server hello (2):
* (304) (IN), TLS handshake, Unknown (8):
* (304) (IN), TLS handshake, Certificate (11):
* (304) (IN), TLS handshake, CERT verify (15):
* (304) (IN), TLS handshake, Finished (20):
* (304) (OUT), TLS handshake, Finished (20):
* SSL connection using TLSv1.3 / AEAD-AES256-GCM-SHA384
~ç•¥~
```
å¤±æ•—ã—ã¦ã„ã‚‹æ–¹ã¯ã€NPN, æˆåŠŸã—ã¦ã„ã‚‹æ–¹ã¯ ALPN ã§ã€ãƒã‚´ã‚·ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’æ±ºã‚ã¦ã„ã‚‹ã‚ˆã†ã 
ãŸã ã€ã©ã¡ã‚‰ã‚‚ HTTP1.1 ã§ã®é€šä¿¡ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹
ã§ã€æ¬¡ã«ã€€å¤±æ•—ã—ã¦ã„ã‚‹æ–¹ã¯ã€TLS1.2 ã§æ¥ç¶šã—ã‚ˆã†ã¨ã—ã¦ã€ certificate has expired ã¨ãªã£ã¦ã„ã‚‹
æˆåŠŸã—ã¦ã„ã‚‹æ–¹ã¯ã€ç„¡äº‹æ¤œè¨¼ã§ãã¦ã„ã‚‹ã‚ˆã†ã 

ãã‚Œãã‚Œã®ã‚µãƒ¼ãƒãƒ¼ã®TLSã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦ã€ä¸‹è¨˜ã®æ‰‹é †ã§ç¢ºèªã™ã‚‹ã¨
https://www.sukicomi.net/2021/03/chrome_tls_kakunin.html

å¤±æ•—ã—ã¦ã„ã‚‹æ¥ç¶šå…ƒã®ã‚µãƒ¼ãƒãƒ¼ã¯ã€TLS1.2
æ¥ç¶šå…ˆã®ã‚µãƒ¼ãƒãƒ¼ã¯ã€TLS1.3ã®å¯¾å¿œã«ãªã£ã¦ã„ã‚‹ã€‚ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç›¸é•ãŒå•é¡Œãªæ°—ãŒã™ã‚‹









è©¦ã—ã«ã€ç¤¾å†…ã®åˆ¥ã®ã‚µã‚¤ãƒˆã‚’å©ãã¨ã€ä»Šåº¦ã¯åˆ¥ã®ã‚¨ãƒ©ãƒ¼ãŒ
```
curl: (60) SSL certificate problem: unable to get local issuer certificate
More details here: https://curl.haxx.se/docs/sslcerts.html

curl failed to verify the legitimacy of the server and therefore could not
establish a secure connection to it. To learn more about this situation and
how to fix it, please visit the web page mentioned above.
```

1. SSL certificate problem: certificate has expired
2. SSL certificate problem: unable to get local issuer certificate

ï¼’ã¤ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ã‚‹ãŒã€ãã‚Œãã‚Œã®ã‚µã‚¤ãƒˆã«å•é¡ŒãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚
1ã¯ã€ã©ã¡ã‚‰ã‹ã®è¨¼æ˜æ›¸ãŒæœŸé™åˆ‡ã‚Œ
2ã¯ã€ãƒ«ãƒ¼ãƒˆè¨¼æ˜æ›¸ã®æ–¹ãŒå–å¾—ã§ããªã„ï¼Ÿ
ã“ã®ï¼’ã¤ãŒåŒæ™‚ã«ç™ºç”Ÿã™ã‚‹çŠ¶æ³ã£ã¦ãªã‚“ãªã®ã ã‚ã†ã‹

